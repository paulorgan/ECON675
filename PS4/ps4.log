-------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\prorgan\Box\Classes\Econ 675\Problem Sets\PS4\ps4.log
  log type:  text
 opened on:  30 Oct 2018, 16:36:21

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD1260_000000.tmp"

. clear all

. 
. set seed 22

. set obs 50
number of observations (_N) was 0, now 50

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD1260_000000.tmp"

. matrix ests = J(10,3,.)

. 
. gen x = rnormal(0,1) 

. gen z = .85*x + sqrt(1-.85)*rnormal(0,1)

. gen eps = rnormal(0,1)

. gen y = 1 + .5*x + z + eps

. 
. * loop for M replications
. forvalues i = 1/10{
  2.         qui replace x = rnormal(0,1) 
  3.         qui replace z = .85*x + sqrt(1-.85)*rnormal(0,1)
  4.         qui replace eps = rnormal(0,1)
  5.         qui replace y = 1 + .5*x + z + eps
  6.         
.         * long regression
.         reg y x z, r
  7.         matrix temp = r(table)
  8.         local beta_hat = temp["b","x"]
  9.         
.         * save gamma over se gamma
.         local gamma_hat = temp["b","z"]
 10.         local gamma_se  = temp["se","z"]
 11.         local tstat = `gamma_hat'/`gamma_se'
 12.         
.         matrix drop temp
 13.         
.         * short regression
.         reg y x, r
 14.         matrix temp = r(table)
 15.         local beta_tilde = temp["b","x"]
 16.         
.         matrix drop temp
 17.         
.         * third estimate
.         local beta_check = cond(`tstat' >= 1.96, `beta_hat', `beta_tilde')
 18.                 
.         matrix ests[`i',1] = `beta_hat'
 19.         matrix ests[`i',2] = `beta_tilde'
 20.         matrix ests[`i',3] = `beta_check'
 21. }

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =      63.75
                                                Prob > F          =     0.0000
                                                R-squared         =     0.7311
                                                Root MSE          =      .9454

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   .8304379    .367815     2.26   0.029     .0904895    1.570386
           z |   .6292121   .4127084     1.52   0.134    -.2010501    1.459474
       _cons |   1.093593   .1364263     8.02   0.000     .8191382    1.368047
------------------------------------------------------------------------------
matrix operators that return matrices not allowed in this context
r(509);

end of do-file

r(509);

. do "C:\Users\prorgan\AppData\Local\Temp\STD1260_000000.tmp"

. clear all

. 
. set seed 22

. set obs 50
number of observations (_N) was 0, now 50

. 
. ********************************************************************************
. * Q3.1: Summary Statistics and Kernel Density Plots
. 
. * this doesn't work...can we use bootstrap somehow? or do in mata?
. 
. * make empty matrix (test with 10 iterations)
. matrix ests = J(10,3,.)

. 
. gen x = rnormal(0,1) 

. gen z = .85*x + sqrt(1-.85)*rnormal(0,1)

. gen eps = rnormal(0,1)

. gen y = 1 + .5*x + z + eps

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD1260_000000.tmp"

.         qui replace x = rnormal(0,1) 

.         qui replace z = .85*x + sqrt(1-.85)*rnormal(0,1)

.         qui replace eps = rnormal(0,1)

.         qui replace y = 1 + .5*x + z + eps

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD1260_000000.tmp"

.         reg y x z, r

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =      63.75
                                                Prob > F          =     0.0000
                                                R-squared         =     0.7311
                                                Root MSE          =      .9454

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   .8304379    .367815     2.26   0.029     .0904895    1.570386
           z |   .6292121   .4127084     1.52   0.134    -.2010501    1.459474
       _cons |   1.093593   .1364263     8.02   0.000     .8191382    1.368047
------------------------------------------------------------------------------

.         matrix temp = r(table)

.         local beta_hat = temp["b","x"]
matrix operators that return matrices not allowed in this context
r(509);

end of do-file

r(509);

. do "C:\Users\prorgan\AppData\Local\Temp\STD1260_000000.tmp"

.         reg y x z, r

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =      63.75
                                                Prob > F          =     0.0000
                                                R-squared         =     0.7311
                                                Root MSE          =      .9454

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   .8304379    .367815     2.26   0.029     .0904895    1.570386
           z |   .6292121   .4127084     1.52   0.134    -.2010501    1.459474
       _cons |   1.093593   .1364263     8.02   0.000     .8191382    1.368047
------------------------------------------------------------------------------

.         matrix coef = e(b)

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD1260_000000.tmp"

.         matrix list coef

coef[1,3]
            x          z      _cons
y1  .83043789  .62921214  1.0935925

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD1260_000000.tmp"

.         local beta_hat = coef["y1","x"]
matrix operators that return matrices not allowed in this context
r(509);

end of do-file

r(509);

. do "C:\Users\prorgan\AppData\Local\Temp\STD1260_000000.tmp"

.         reg y x z, r

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =      63.75
                                                Prob > F          =     0.0000
                                                R-squared         =     0.7311
                                                Root MSE          =      .9454

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   .8304379    .367815     2.26   0.029     .0904895    1.570386
           z |   .6292121   .4127084     1.52   0.134    -.2010501    1.459474
       _cons |   1.093593   .1364263     8.02   0.000     .8191382    1.368047
------------------------------------------------------------------------------

.         local beta_hat = _b["x"]

.         display `beta_hat'
.83043789

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD1260_000000.tmp"

.         reg y x z, r

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =      63.75
                                                Prob > F          =     0.0000
                                                R-squared         =     0.7311
                                                Root MSE          =      .9454

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   .8304379    .367815     2.26   0.029     .0904895    1.570386
           z |   .6292121   .4127084     1.52   0.134    -.2010501    1.459474
       _cons |   1.093593   .1364263     8.02   0.000     .8191382    1.368047
------------------------------------------------------------------------------

.         local beta_hat = _b["x"]

.         
.         * save gamma over se gamma
.         local gamma_hat = _b["z"]

.         local gamma_se  = _se["z"]

.         local tstat = `gamma_hat'/`gamma_se'

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD1260_000000.tmp"

. clear all

. 
. set seed 22

. set obs 50
number of observations (_N) was 0, now 50

. 
. ********************************************************************************
. * Q3.1: Summary Statistics and Kernel Density Plots
. 
. * this doesn't work...can we use bootstrap somehow? or do in mata?
. 
. * make empty matrix (test with 10 iterations)
. matrix ests = J(10,3,.)

. 
. gen x = rnormal(0,1) 

. gen z = .85*x + sqrt(1-.85)*rnormal(0,1)

. gen eps = rnormal(0,1)

. gen y = 1 + .5*x + z + eps

. 
. * loop for M replications
. forvalues i = 1/10{
  2.         qui replace x = rnormal(0,1) 
  3.         qui replace z = .85*x + sqrt(1-.85)*rnormal(0,1)
  4.         qui replace eps = rnormal(0,1)
  5.         qui replace y = 1 + .5*x + z + eps
  6.         
.         * long regression
.         reg y x z, r
  7.         local beta_hat = _b["x"]
  8.         
.         * save gamma over se gamma
.         local gamma_hat = _b["z"]
  9.         local gamma_se  = _se["z"]
 10.         local tstat = `gamma_hat'/`gamma_se'
 11.                 
.         * short regression
.         reg y x, r
 12.         local beta_tilde = _b["x"]
 13.         
.         * third estimate
.         local beta_check = cond(`tstat' >= 1.96, `beta_hat', `beta_tilde')
 14.                 
.         matrix ests[`i',1] = `beta_hat'
 15.         matrix ests[`i',2] = `beta_tilde'
 16.         matrix ests[`i',3] = `beta_check'
 17. }

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =      63.75
                                                Prob > F          =     0.0000
                                                R-squared         =     0.7311
                                                Root MSE          =      .9454

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   .8304379    .367815     2.26   0.029     .0904895    1.570386
           z |   .6292121   .4127084     1.52   0.134    -.2010501    1.459474
       _cons |   1.093593   .1364263     8.02   0.000     .8191382    1.368047
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(1, 48)          =     122.85
                                                Prob > F          =     0.0000
                                                R-squared         =     0.7170
                                                Root MSE          =     .95973

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   1.344039   .1212596    11.08   0.000      1.10023    1.587848
       _cons |   1.067127   .1370007     7.79   0.000     .7916683    1.342585
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =      64.34
                                                Prob > F          =     0.0000
                                                R-squared         =     0.6599
                                                Root MSE          =     .99335

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   .0106363   .4013004     0.03   0.979    -.7966759    .8179485
           z |    1.58175    .414602     3.82   0.000     .7476781    2.415821
       _cons |   1.005619   .1477505     6.81   0.000     .7083832    1.302854
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(1, 48)          =      81.13
                                                Prob > F          =     0.0000
                                                R-squared         =     0.5710
                                                Root MSE          =     1.1039

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   1.327626   .1473957     9.01   0.000     1.031267    1.623985
       _cons |   .9461891   .1575212     6.01   0.000     .6294715    1.262907
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =     105.01
                                                Prob > F          =     0.0000
                                                R-squared         =     0.8302
                                                Root MSE          =     .72139

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |    .097455   .2081797     0.47   0.642    -.3213486    .5162586
           z |   1.480139   .2536555     5.84   0.000     .9698503    1.990428
       _cons |    .951471   .1044058     9.11   0.000     .7414337    1.161508
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(1, 48)          =     108.61
                                                Prob > F          =     0.0000
                                                R-squared         =     0.6824
                                                Root MSE          =     .97633

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   1.341537   .1287281    10.42   0.000     1.082711    1.600362
       _cons |   .9964266   .1352167     7.37   0.000     .7245553    1.268298
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =      31.11
                                                Prob > F          =     0.0000
                                                R-squared         =     0.6014
                                                Root MSE          =     1.1755

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   .8559705   .4206109     2.04   0.048     .0098105    1.702131
           z |   .6922758   .4545897     1.52   0.134    -.2222408    1.606792
       _cons |   1.062897   .1702362     6.24   0.000     .7204262    1.405368
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(1, 48)          =      56.99
                                                Prob > F          =     0.0000
                                                R-squared         =     0.5848
                                                Root MSE          =     1.1872

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   1.421975    .188365     7.55   0.000     1.043242    1.800708
       _cons |   1.039522    .167617     6.20   0.000      .702505    1.376538
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =      23.30
                                                Prob > F          =     0.0000
                                                R-squared         =     0.4851
                                                Root MSE          =     1.2021

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   .6592234   .4533368     1.45   0.153    -.2527726    1.571219
           z |   .5061406    .474774     1.07   0.292    -.4489815    1.461263
       _cons |   .8923305   .1716463     5.20   0.000     .5470226    1.237638
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(1, 48)          =      44.64
                                                Prob > F          =     0.0000
                                                R-squared         =     0.4692
                                                Root MSE          =     1.2076

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   1.112718   .1665419     6.68   0.000     .7778633    1.447573
       _cons |    .882012   .1737151     5.08   0.000     .5327343     1.23129
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =      53.67
                                                Prob > F          =     0.0000
                                                R-squared         =     0.6433
                                                Root MSE          =      .9931

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   1.040219   .2220943     4.68   0.000      .593423    1.487015
           z |   .2601115    .274911     0.95   0.349    -.2929381     .813161
       _cons |   1.154239   .1474413     7.83   0.000     .8576258    1.450853
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(1, 48)          =      95.13
                                                Prob > F          =     0.0000
                                                R-squared         =     0.6382
                                                Root MSE          =     .98971

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   1.266888     .12989     9.75   0.000     1.005726    1.528049
       _cons |   1.170423   .1422188     8.23   0.000     .8844727    1.456373
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =      74.59
                                                Prob > F          =     0.0000
                                                R-squared         =     0.7917
                                                Root MSE          =     .78741

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |    .147817   .3111636     0.48   0.637    -.4781634    .7737975
           z |   1.278312   .3567938     3.58   0.001     .5605357    1.996089
       _cons |   .8509836   .1141159     7.46   0.000      .621412    1.080555
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(1, 48)          =     124.05
                                                Prob > F          =     0.0000
                                                R-squared         =     0.7259
                                                Root MSE          =     .89384

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   1.221417   .1096629    11.14   0.000     1.000925    1.441909
       _cons |   .9266439    .136108     6.81   0.000     .6529805    1.200307
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =      60.08
                                                Prob > F          =     0.0000
                                                R-squared         =     0.5662
                                                Root MSE          =     1.0686

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   .7240226   .4931914     1.47   0.149    -.2681504    1.716196
           z |   .6695012   .5384378     1.24   0.220     -.413696    1.752698
       _cons |   .9927627   .1566901     6.34   0.000     .6775428    1.307983
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(1, 48)          =     111.27
                                                Prob > F          =     0.0000
                                                R-squared         =     0.5449
                                                Root MSE          =     1.0831

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   1.288296   .1221313    10.55   0.000     1.042734    1.533857
       _cons |   1.043083   .1534071     6.80   0.000      .734637    1.351528
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =      95.91
                                                Prob > F          =     0.0000
                                                R-squared         =     0.7434
                                                Root MSE          =     .83226

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |  -.1367832   .2238226    -0.61   0.544    -.5870561    .3134897
           z |   1.700298   .2438343     6.97   0.000     1.209767    2.190829
       _cons |   .9690003   .1130728     8.57   0.000     .7415272    1.196473
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(1, 48)          =      85.14
                                                Prob > F          =     0.0000
                                                R-squared         =     0.5876
                                                Root MSE          =     1.0441

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   1.208061   .1309232     9.23   0.000     .9448223      1.4713
       _cons |   1.059602   .1480956     7.15   0.000     .7618359    1.357368
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(2, 47)          =      81.52
                                                Prob > F          =     0.0000
                                                R-squared         =     0.7599
                                                Root MSE          =     .88778

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   .3322494   .3299456     1.01   0.319    -.3315155    .9960143
           z |   1.341748   .3211372     4.18   0.000     .6957035    1.987793
       _cons |   .9220659   .1302004     7.08   0.000     .6601364    1.183995
------------------------------------------------------------------------------

Linear regression                               Number of obs     =         50
                                                F(1, 48)          =     114.66
                                                Prob > F          =     0.0000
                                                R-squared         =     0.6913
                                                Root MSE          =     .99596

------------------------------------------------------------------------------
             |               Robust
           y |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
           x |   1.508833   .1409108    10.71   0.000     1.225513    1.792154
       _cons |   .7885013   .1420322     5.55   0.000     .5029264    1.074076
------------------------------------------------------------------------------

. 
. matrix list ests

ests[10,3]
             c1          c2          c3
 r1   .83043789   1.3440389   1.3440389
 r2   .01063633   1.3276262   .01063633
 r3   .09745502   1.3415367   .09745502
 r4   .85597052   1.4219751   1.4219751
 r5   .65922343   1.1127182   1.1127182
 r6    1.040219   1.2668876   1.2668876
 r7   .14781701   1.2214173   .14781701
 r8   .72402264   1.2882957   1.2882957
 r9  -.13678318   1.2080611  -.13678318
r10   .33224939   1.5088334   .33224939

. 
end of do-file

