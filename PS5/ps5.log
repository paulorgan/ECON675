-------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\prorgan\Box\Classes\Econ 675\Problem Sets\PS5\ps5.log
  log type:  text
 opened on:  18 Nov 2018, 18:17:09

. 
. ********************************************************************************
. *** Question 2: Weak Instrument Simulations
. ********************************************************************************
. * Q2 setup
. 
. ********************************************************************************
. * Q2: OLS
. 
. 
. ********************************************************************************
. * Q2: 2SLS
. 
. 
. ********************************************************************************
. *** Question 3: Weak Instrument - Empirical Study
. ********************************************************************************
. * Q3 setup
. clear all

. 
. use Angrist_Krueger

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD22e0_000000.tmp"

. capture program drop IV_quick

. program define IV_quick, rclass
  1.     syntax varlist(max=1) [, model(integer 1) ]
  2.         local x "`varlist'"
  3.         
.         if (`model' == 1) {
  4.             capture drop educ_hat
  5.                 qui reg educ non_white married SMSA i.region i.YoB_ld i.YoB_ld##
> i.`x'
  6.                 predict educ_hat
  7.                 qui reg l_w_wage educ_hat non_white married SMSA i.region i.YoB_
> ld
  8.                 return scalar beta = _b[educ_hat]
  9.         }
 10.         if (`model' == 2) {
 11.             capture drop educ_hat
 12.                 qui reg educ non_white married SMSA age_q age_sq i.region i.YoB_
> ld i.YoB_ld##i.`x'
 13.                 predict educ_hat
 14.                 qui reg l_w_wage educ_hat non_white married SMSA age_q age_sq i.
> region i.YoB_ld
 15.                 return scalar beta = _b[educ_hat]
 16.         }
 17. end

. 
. permute QoB TSLS_1_b = r(beta), reps(500) seed(22) saving(q3_model1, replace): ///
>     IV_quick QoB, model(1)
(running IV_quick on estimation sample)
(note: file q3_model1.dta not found)

Permutation replications (500)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500

Monte Carlo permutation results                 Number of obs     =    329,509

      command:  IV_quick QoB, model(1)
     TSLS_1_b:  r(beta)
  permute var:  QoB

------------------------------------------------------------------------------
T            |     T(obs)       c       n   p=c/n   SE(p) [95% Conf. Interval]
-------------+----------------------------------------------------------------
    TSLS_1_b |   .0805519     155     500  0.3100  0.0207  .2696884   .3525757
------------------------------------------------------------------------------
Note: Confidence interval is with respect to p=c/n.
Note: c = #{|T| >= |T(obs)|}

.         
. permute QoB TSLS_2_b = r(beta), reps(500) seed(22) saving(q3_model2, replace): ///
>     IV_quick QoB, model(2)
(running IV_quick on estimation sample)
(note: file q3_model2.dta not found)

Permutation replications (500)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500

Monte Carlo permutation results                 Number of obs     =    329,509

      command:  IV_quick QoB, model(2)
     TSLS_2_b:  r(beta)
  permute var:  QoB

------------------------------------------------------------------------------
T            |     T(obs)       c       n   p=c/n   SE(p) [95% Conf. Interval]
-------------+----------------------------------------------------------------
    TSLS_2_b |   .0599538     269     500  0.5380  0.0223  .4931858   .5823624
------------------------------------------------------------------------------
Note: Confidence interval is with respect to p=c/n.
Note: c = #{|T| >= |T(obs)|}

. 
. clear all

. use q3_model1
(permute QoB : IV_quick)

. sum TSLS_1_b

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    TSLS_1_b |        500    .0625177    .0392369   -.079467   .1725697

. 
. clear all

. use q3_model2
(permute QoB : IV_quick)

. sum TSLS_2_b

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
    TSLS_2_b |        500    .0625487    .0392468  -.0780059   .1724133

. 
end of do-file

