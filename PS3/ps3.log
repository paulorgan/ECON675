-------------------------------------------------------------------------------------
      name:  <unnamed>
       log:  C:\Users\prorgan\Box\Classes\Econ 675\Problem Sets\PS3\ps3.log
  log type:  text
 opened on:  19 Oct 2018, 19:31:48

. 
. ********************************************************************************
. *** Question 1: Non-linear Least Squares
. ********************************************************************************
. * Q1.9 setup
. * load data
. use pisofirme, clear

. 
. * add variable indicating having outcome data
. gen s = 1-dmissing

. 
. * add log variable for use in regression [log(S_incomepc + 1)]
. gen log_SincpcP1 = log(S_incomepc + 1)
(3 missing values generated)

. 
. * Q1.9a - estimates and statistics
. * logit regression, robuse standard errors
. logit s S_age S_HHpeople log_SincpcP1, vce(robust)

Iteration 0:   log pseudolikelihood = -1154.1918  
Iteration 1:   log pseudolikelihood = -913.49548  
Iteration 2:   log pseudolikelihood = -808.12736  
Iteration 3:   log pseudolikelihood = -799.30907  
Iteration 4:   log pseudolikelihood = -799.15953  
Iteration 5:   log pseudolikelihood =  -799.1594  
Iteration 6:   log pseudolikelihood =  -799.1594  

Logistic regression                             Number of obs     =      4,089
                                                Wald chi2(3)      =     136.38
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -799.1594               Pseudo R2         =     0.3076

------------------------------------------------------------------------------
             |               Robust
           s |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       S_age |   1.333361   .1230986    10.83   0.000     1.092092     1.57463
  S_HHpeople |  -.0665942   .0231898    -2.87   0.004    -.1120454   -.0211429
log_SincpcP1 |   -.118689   .0438226    -2.71   0.007    -.2045796   -.0327983
       _cons |   1.755024   .3344889     5.25   0.000     1.099438     2.41061
------------------------------------------------------------------------------

. 
. * output for LaTeX
. outreg2 using q1_9a.tex, side stats(coef se tstat pval ci) ///
>  noaster noparen nor2 noobs dec(3) replace
q1_9a.tex
dir : seeout

. 
. * Q1.9b - nonparametric bootstrap
. logit s S_age S_HHpeople log_SincpcP1, vce(bootstrap, reps(999))
(running logit on estimation sample)

Bootstrap replications (999)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500
..................................................   550
..................................................   600
..................................................   650
..................................................   700
..................................................   750
..................................................   800
..................................................   850
..................................................   900
..................................................   950
.................................................

Logistic regression                             Number of obs     =      4,089
                                                Replications      =        999
                                                Wald chi2(3)      =     120.15
                                                Prob > chi2       =     0.0000
Log likelihood =  -799.1594                     Pseudo R2         =     0.3076

------------------------------------------------------------------------------
             |   Observed   Bootstrap                         Normal-based
           s |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       S_age |   1.333361   .1311692    10.17   0.000     1.076274    1.590448
  S_HHpeople |  -.0665942    .023702    -2.81   0.005    -.1130492   -.0201391
log_SincpcP1 |   -.118689   .0456251    -2.60   0.009    -.2081124   -.0292655
       _cons |   1.755024   .3442683     5.10   0.000     1.080271    2.429778
------------------------------------------------------------------------------

. 
. * output for LaTeX
. outreg2 using q1_9b.tex, side stats(coef se tstat pval ci) ///
>  noaster noparen nor2 noobs dec(3) replace
q1_9b.tex
dir : seeout

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. logit s S_age S_HHpeople log_SincpcP1, vce(robust)

Iteration 0:   log pseudolikelihood = -1154.1918  
Iteration 1:   log pseudolikelihood = -913.49548  
Iteration 2:   log pseudolikelihood = -808.12736  
Iteration 3:   log pseudolikelihood = -799.30907  
Iteration 4:   log pseudolikelihood = -799.15953  
Iteration 5:   log pseudolikelihood =  -799.1594  
Iteration 6:   log pseudolikelihood =  -799.1594  

Logistic regression                             Number of obs     =      4,089
                                                Wald chi2(3)      =     136.38
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -799.1594               Pseudo R2         =     0.3076

------------------------------------------------------------------------------
             |               Robust
           s |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       S_age |   1.333361   .1230986    10.83   0.000     1.092092     1.57463
  S_HHpeople |  -.0665942   .0231898    -2.87   0.004    -.1120454   -.0211429
log_SincpcP1 |   -.118689   .0438226    -2.71   0.007    -.2045796   -.0327983
       _cons |   1.755024   .3344889     5.25   0.000     1.099438     2.41061
------------------------------------------------------------------------------

. 
. * predict propensity score
. predict p
(option pr assumed; Pr(s))
(3 missing values generated)

. 
end of do-file

. sum p

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
           p |      4,089     .918562    .1245655   .4411936   .9997487

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. twoway histogram p || kdensity p

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. twoway histogram p || kdensity p, k(gaussian) || ///
>  kdensity p, k(epanechnikov) || kdensity p, k(triangle)

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. twoway histogram p || kdensity p, k(gaussian) || ///
>  kdensity p, k(epanechnikov) || kdensity p, k(triangle) lab(Triangle)
option lab() not allowed
r(198);

end of do-file

r(198);

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. * plot histogram, overlay kernel density
. twoway histogram p || kdensity p, k(gaussian) || ///
>  kdensity p, k(epanechnikov) || kdensity p, k(triangle) label(Triangle)
option label() not allowed
r(198);

end of do-file

r(198);

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. twoway histogram p || kdensity p, k(gaussian) || ///
>  kdensity p, k(epanechnikov) || kdensity p, k(triangle) leg(label(Triangle))
Triangle not an integer in option label()
r(198);

end of do-file

r(198);

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. twoway histogram p || kdensity p, k(gaussian) || ///
>  kdensity p, k(epanechnikov) || kdensity p, k(triangle) ///
>  leg(lab(1, "Propensity Score") lab(2,"Gaussian"))
1, not an integer in option label()
r(198);

end of do-file

r(198);

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. twoway histogram p || kdensity p, k(gaussian) || ///
>  kdensity p, k(epanechnikov) || kdensity p, k(triangle) ///
>  leg(lab(1 "Propensity Score") lab(2 "Gaussian"))

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. twoway histogram p || kdensity p, k(gaussian) || ///
>  kdensity p, k(epanechnikov) || kdensity p, k(triangle) ///
>  leg(lab(1 "Propensity Score") lab(2 "Gaussian") ///
>          lab(3 "Epanechnikov") lab(4 "Triangle")
parentheses do not balance
r(198);

end of do-file

r(198);

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. twoway histogram p || kdensity p, k(gaussian) || ///
>  kdensity p, k(epanechnikov) || kdensity p, k(triangle) ///
>  leg(lab(1 "Propensity Score") lab(2 "Gaussian") ///
>          lab(3 "Epanechnikov") lab(4 "Triangle"))

. 
end of do-file

. help scheme

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. set scheme s1color

. 
. * plot histogram, overlay kernel density
. twoway histogram p || kdensity p, k(gaussian) || ///
>  kdensity p, k(epanechnikov) || kdensity p, k(triangle) ///
>  leg(lab(1 "Propensity Score") lab(2 "Gaussian") ///
>          lab(3 "Epanechnikov") lab(4 "Triangle"))

. 
end of do-file

. graph query, schemes

Available schemes are

    s2color        see help scheme_s2color
    s2mono         see help scheme_s2mono
    s2manual       see help scheme_s2manual
    s2gmanual      see help scheme_s2gmanual
    s2gcolor       see help scheme_s2gcolor
    s1color        see help scheme_s1color
    s1mono         see help scheme_s1mono
    s1rcolor       see help scheme_s1rcolor
    s1manual       see help scheme_s1manual
    sj             see help scheme_sj
    economist      see help scheme_economist
    s2color8       see help scheme_s2color8

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. set scheme plotplain
scheme plotplain not found
r(111);

end of do-file

r(111);

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. set scheme s2color

. 
. * plot histogram, overlay kernel density
. twoway histogram p || kdensity p, k(gaussian) || ///
>  kdensity p, k(epanechnikov) || kdensity p, k(triangle) ///
>  leg(lab(1 "Propensity Score") lab(2 "Gaussian") ///
>          lab(3 "Epanechnikov") lab(4 "Triangle"))

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. set scheme s1color

. 
. * plot histogram, overlay kernel density
. twoway histogram p || kdensity p, k(gaussian) || ///
>  kdensity p, k(epanechnikov) || kdensity p, k(triangle) ///
>  leg(lab(1 "Propensity Score") lab(2 "Gaussian") ///
>          lab(3 "Epanechnikov") lab(4 "Triangle"))

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. set scheme s2color

. 
. * plot histogram, overlay kernel density
. twoway histogram p || kdensity p, k(gaussian) || ///
>  kdensity p, k(epanechnikov) || kdensity p, k(triangle) ///
>  leg(lab(1 "Propensity Score") lab(2 "Gaussian") ///
>          lab(3 "Epanechnikov") lab(4 "Triangle"))

. 
end of do-file

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. logit s S_age S_HHpeople log_SincpcP1, vce(robust)

Iteration 0:   log pseudolikelihood = -1154.1918  
Iteration 1:   log pseudolikelihood = -913.49548  
Iteration 2:   log pseudolikelihood = -808.12736  
Iteration 3:   log pseudolikelihood = -799.30907  
Iteration 4:   log pseudolikelihood = -799.15953  
Iteration 5:   log pseudolikelihood =  -799.1594  
Iteration 6:   log pseudolikelihood =  -799.1594  

Logistic regression                             Number of obs     =      4,089
                                                Wald chi2(3)      =     136.38
                                                Prob > chi2       =     0.0000
Log pseudolikelihood =  -799.1594               Pseudo R2         =     0.3076

------------------------------------------------------------------------------
             |               Robust
           s |      Coef.   Std. Err.      z    P>|z|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
       S_age |   1.333361   .1230986    10.83   0.000     1.092092     1.57463
  S_HHpeople |  -.0665942   .0231898    -2.87   0.004    -.1120454   -.0211429
log_SincpcP1 |   -.118689   .0438226    -2.71   0.007    -.2045796   -.0327983
       _cons |   1.755024   .3344889     5.25   0.000     1.099438     2.41061
------------------------------------------------------------------------------

. 
. * predict propensity score
. predict p
variable p already defined
r(110);

end of do-file

r(110);

. do "C:\Users\prorgan\AppData\Local\Temp\STD27a0_000000.tmp"

. twoway histogram p || kdensity p, k(gaussian) || ///
>  kdensity p, k(epanechnikov) || kdensity p, k(triangle) ///
>  leg(lab(1 "Propensity Score") lab(2 "Gaussian") ///
>          lab(3 "Epanechnikov") lab(4 "Triangle"))

.          
. * save
. graph export q1_9c_S.png, replace
(note: file q1_9c_S.png not found)
(file q1_9c_S.png written in PNG format)

. 
end of do-file

. exit, clear
